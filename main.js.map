{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/assets/images/title_bombers.png","webpack:///./src/assets/images/chemin.png","webpack:///./src/assets/images/arena_wall.png","webpack:///./src/assets/images/arena_bomber_walk.png","webpack:///./src/assets/images/arena_bomber_death.png","webpack:///./src/assets/images/arena_bomb.png","webpack:///./src/assets/images/arena_flame.png","webpack:///./src/assets/images/arena_item.png","webpack:///./src/assets/images/winner_bomber.png","webpack:///./src/utils/sprite.js","webpack:///./src/state/actions.js","webpack:///./src/game/color.js","webpack:///./src/game/geme-status.js","webpack:///./src/menus/menu.js","webpack:///./src/menus/title.js","webpack:///./src/game/bomb.js","webpack:///./src/game/flame.js","webpack:///./src/game/cardinal.js","webpack:///./src/game/character-status.js","webpack:///./src/game/blast.js","webpack:///./src/game/direction.js","webpack:///./src/game/character.js","webpack:///./src/game/bonus-type.js","webpack:///./src/utils/music.js","webpack:///./src/menus/options.js","webpack:///./src/game/ground.js","webpack:///./src/game/board.js","webpack:///./src/game/block.js","webpack:///./src/game/game.js","webpack:///./src/game/wall.js","webpack:///./src/game/bonus.js","webpack:///./src/utils/game-utils.js","webpack:///./src/index.js","webpack:///./src/state/state.js","webpack:///./src/utils/keyboard.js","webpack:///./src/utils/gamepad.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","installedModules","0","__webpack_require__","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","p","jsonpScriptSrc","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","s","this","titleImage","Image","groundImage","wallImage","width","height","characterAliveImage","characterDeadImage","bombImage","flameImage","itemImage","imageVictory","Action","UP","DOWN","LEFT","RIGHT","ENTER","ADD_PLAYER","MENU_OVERFLOW","RESET","ADD_BLAST","BLAST_VANISHED","DROP_BOMB","BOMB_EXPLODED","DESTROY","KILL","VICTORY","INIT_GAME","BONUS_EXPLODED","GET_BONUS","MOVE","freeze","COLOR","WHITE","BLACK","RED","BLUE","GREEN","GAMESTATUS","INITIALISATION","READY","IN_PROGRESS","END","imageTitlePosition","fontSize","selectedOption","playersDilayed","addEventListener","state","detail","characters","canvasContext","render","ctx","fillStyle","fillRect","screenWidth","screenHeight","font","textAlign","textBaseline","fillText","offset","forEach","player","index","drawImage","titleWallpaper","minSelectableOption","maxSelectableOption","dispatchEvent","CustomEvent","payload","selectionOption","currentScreen","gameStatus","super","code","ready","manageOverflowMenu","getColorMenu","menu","character","x","y","animationState","animationDuration","timeElapsed","time","accelerator","timer","frame","Math","floor","currentBomb","bomb","power","cardinal","flame","CARDINAL","MIDDLE","NORTH_MIDDLE","EAST_MIDDLE","SOUTH_MIDDLE","WEST_MIDDLE","NORTH_END","EAST_END","SOUTH_END","WEST_END","CharacterStatus","ALIVE","VICTORIOUS","DEAD","map","walls","bombs","bonus","radius","flames","canPropagate","north","east","south","west","currentBlast","blast","computePower","computeNorth","computeEast","computeSouth","computeWest","item","status","indexBlastNorth","canVanish","destroyed","destroyedX","destroyedY","indexBlastEast","indexBlastSouth","indexBlastWest","DIRECTION","TOP","color","direction","gamePadIndex","offsetX","offsetY","bombMax","bombUsed","pixelsToTreat","nextFrame","getNextFrame","find","currentPlayerColor","renderAlive","renderDead","renderVictory","targetX","targetY","characterAlive","getNextImageFrame","coord","playerColor","characterDead","image","characterVictory","BONUSTYPE","BOMB","POWER","SPEED","Music","then","song","default","audio","Audio","load","loop","ground","blasts","canvas","getElementById","frameUpLeft","frameUpRight","frameUp","frameBottomLeft","frameBottomRight","frameBottom","frameLeft","frameRight","block","k","j","computeVictory","aliveCharacters","filter","wall","etatAnimation","dureeAnimation","z","getRandomInt","excludedCoords","coords","toString","randomInt","includes","max","random","getContext","initialState","currentScreenCode","that","reducer","action","menuBeep","play","newScreen","getNewScreen","menuPrevious","menuNext","location","reload","splice","indexOf","bombDrop","explosion","death","win","thePlayer","move","createStore","keys","up","down","left","right","space","enter","escape","handledKeys","keyCode","gamepads","toucheds","gamepad","navigator","getGamepads","buttons","pressed","songMenu","pause","initWalls","initBonus","step","update","listen","requestAnimationFrame","metrics","computedWidth","computedHeight","stretch","body","offsetWidth","offsetHeight","style"],"mappings":"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","file":"main.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t};\n\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + chunkId + \".main.js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n","module.exports = __webpack_public_path__ + \"assets/images/title_bombers.png\";","module.exports = __webpack_public_path__ + \"assets/images/chemin.png\";","module.exports = __webpack_public_path__ + \"assets/images/arena_wall.png\";","module.exports = __webpack_public_path__ + \"assets/images/arena_bomber_walk.png\";","module.exports = __webpack_public_path__ + \"assets/images/arena_bomber_death.png\";","module.exports = __webpack_public_path__ + \"assets/images/arena_bomb.png\";","module.exports = __webpack_public_path__ + \"assets/images/arena_flame.png\";","module.exports = __webpack_public_path__ + \"assets/images/arena_item.png\";","module.exports = __webpack_public_path__ + \"assets/images/winner_bomber.png\";","import title from '../assets/images/title_bombers.png'\nimport ground from '../assets/images/chemin.png'\nimport wall from '../assets/images/arena_wall.png'\nimport walk from '../assets/images/arena_bomber_walk.png'\nimport death from '../assets/images/arena_bomber_death.png'\nimport bomb from '../assets/images/arena_bomb.png'\nimport flame from '../assets/images/arena_flame.png'\nimport item from '../assets/images/arena_item.png'\nimport winner from '../assets/images/winner_bomber.png'\n\nexport class Sprite {\n\n    static titleWallpaper() {\n        if(this.titleImage) {\n            return this.titleImage;\n        }\n        this.titleImage = new Image();\n        this.titleImage.src = title;\n\n        return this.titleImage;\n    }\n\n    static ground() {\n        if(this.groundImage) {\n            return this.groundImage;\n        }\n        this.groundImage = new Image();\n        this.groundImage.src = ground;\n        return this.groundImage;\n    }\n\n    static wall() {\n        if(this.wallImage) {\n            return this.wallImage;\n        }\n        this.wallImage = new Image();\n        this.wallImage.src = wall;\n        this.wallImage.width = 32;\n        this.wallImage.height = 32;\n        return this.wallImage;\n    }\n\n    static characterAlive() {\n        if (this.characterAliveImage) {\n            return this.characterAliveImage;\n        }\n        this.characterAliveImage = new Image();\n        this.characterAliveImage.src = walk;\n        this.characterAliveImage.width = 43;\n        this.characterAliveImage.height = 45;\n        return this.characterAliveImage;\n    }\n\n    static characterDead() {\n        if(this.characterDeadImage) {\n            return this.characterDeadImage;\n        }\n        this.characterDeadImage = new Image();\n        this.characterDeadImage.src = death;\n        this.characterDeadImage.width = 517 / 12;\n        this.characterDeadImage.height = 316 / 7;\n        return this.characterDeadImage;\n    }\n\n    static bomb() {\n        if(this.bombImage) {\n            return this.bombImage;\n        }\n        this.bombImage = new Image();\n        this.bombImage.src = bomb;\n        this.bombImage.width = 100 / 3;\n        this.bombImage.height = 34;\n        return this.bombImage;\n    }\n\n    static flame() {\n        if(this.flameImage) {\n            return this.flameImage;\n        }\n        this.flameImage = new Image();\n        this.flameImage.src = flame;\n        this.flameImage.width = 925 / 28;\n        this.flameImage.height = 34;\n        return this.flameImage;\n    }\n\n    static bonus() {\n        if(this.itemImage) {\n            return this.itemImage;\n        }\n        this.itemImage = new Image();\n        this.itemImage.src = item;\n        this.itemImage.width = 529 / 16;\n        this.itemImage.height = 34;\n        return this.itemImage;\n    }\n\n    static characterVictory() {\n        if(this.imageVictory) {\n            return this.imageVictory;\n        }\n        this.imageVictory = new Image();\n        this.imageVictory.width = 101 / 4;\n        this.imageVictory.height = 166 / 5;\n        this.imageVictory.src = winner;\n        return this.imageVictory;\n    }\n}\n\n\n","export const Action = {\n    UP: \"UP\",\n    DOWN: \"DOWN\",\n    LEFT: \"LEFT\",\n    RIGHT: \"RIGHT\",\n    ENTER: \"ENTER\",\n    ADD_PLAYER : \"ADD_PLAYER\",\n    MENU_OVERFLOW: \"MENU_OVERFLOW\",\n    RESET: \"RESET\",\n    ADD_BLAST: \"ADD_BLAST\",\n    BLAST_VANISHED: \"BLAST_VANISHED\",\n    DROP_BOMB: \"DROP_BOMB\",\n    BOMB_EXPLODED: \"BOMB_EXPLODED\",\n    DESTROY: \"DESTROY\",\n    KILL: \"KILL\",\n    VICTORY: \"VICTORY\",\n    INIT_GAME: \"INIT_GAME\",\n    BONUS_EXPLODED: \"BONUS_EXPLODED\",\n    GET_BONUS: \"GET_BONUS\",\n    MOVE: \"MOVE\",\n\n};\n\nObject.freeze(Action);\n","export const COLOR = {\n    WHITE: 0,\n    BLACK: 1,\n    RED: 2,\n    BLUE: 3,\n    GREEN: 4\n};\n\nObject.freeze(COLOR);","export const GAMESTATUS = {\n    INITIALISATION: \"INITIALISATION\",\n    READY: \"READY\",\n    IN_PROGRESS: \"IN_PROGRESS\",\n    END: \"END\"\n};","import {Sprite} from \"../utils/sprite\";\nimport {Action} from \"../state/actions\";\nimport {COLOR} from \"../game/color\";\nimport {GAMESTATUS} from \"../game/geme-status\";\n\nexport class Menu {\n\n    constructor() {\n        this.imageTitlePosition = 800;\n        this.fontSize = 30;\n        this.selectedOption = 1;\n        this.playersDilayed = [];\n        document.addEventListener('state', (state) => {\n            this.playersDilayed = state.detail.characters;\n        });\n    }\n\n    update(canvasContext) {\n        this.render(canvasContext);\n    }\n\n    render(canvasContext) {\n        canvasContext.ctx.fillStyle = \"rgb(52,173,98)\";\n        canvasContext.ctx.fillRect(0, 400, canvasContext.screenWidth, canvasContext.screenHeight);\n        canvasContext.ctx.fillStyle = \"lightblue\";\n        canvasContext.ctx.fillRect(0, 0, canvasContext.screenWidth, 400);\n\n\n        if(this.playersDilayed && this.playersDilayed.length === 0) {\n            canvasContext.ctx.font = \"20px Bomberman\";\n            canvasContext.ctx.textAlign = \"center\";\n            canvasContext.ctx.textBaseline = \"top\";\n            canvasContext.ctx.fillStyle = \"red\";\n            canvasContext.ctx.fillText(\"Connect 2 controllers\", (canvasContext.screenWidth / 2) + 5, 20);\n        } else {\n            let offset = 100;\n            canvasContext.ctx.font = \"25px Bomberman\";\n            canvasContext.ctx.textAlign = \"center\";\n            canvasContext.ctx.textBaseline = \"top\";\n            canvasContext.ctx.fillStyle = \"red\";\n\n            this.playersDilayed.forEach( (player, index) => {\n                if(index === COLOR.WHITE) {\n                    canvasContext.ctx.fillStyle = \"white\";\n                }\n                if(index === COLOR.BLACK) {\n                    canvasContext.ctx.fillStyle = \"black\";\n                }\n                if(index === COLOR.RED) {\n                    canvasContext.ctx.fillStyle = \"red\";\n                }\n                if(index === COLOR.BLUE) {\n                    canvasContext.ctx.fillStyle = \"blue\";\n                }\n                canvasContext.ctx.fillText(\"Player \" + (index + 1), 100 + offset, 20);\n                offset = offset + 200;\n            });\n        }\n\n        if (this.imageTitlePosition > 170) {\n            this.imageTitlePosition -= 15;\n        }\n\n        canvasContext.ctx.drawImage(Sprite.titleWallpaper(), 0, this.imageTitlePosition + 5, canvasContext.screenWidth, canvasContext.screenHeight - 160);\n\n        if (this.fontSize < 90) {\n            this.fontSize++;\n        }\n\n        canvasContext.ctx.font = this.fontSize + \"px Bomberman\";\n        canvasContext.ctx.textAlign = \"center\";\n        canvasContext.ctx.textBaseline = \"top\";\n        canvasContext.ctx.fillStyle = \"gray\";\n        canvasContext.ctx.fillText(\"Bomberman.js\", (canvasContext.screenWidth / 2) + 5, 80 + 5);\n        canvasContext.ctx.fillStyle = \"rgb(250, 250, 250)\";\n        canvasContext.ctx.fillText(\"Bomberman.js\", (canvasContext.screenWidth / 2), 80);\n\n        canvasContext.ctx.font = \"20px Bomberman\";\n        canvasContext.ctx.fillStyle = \"rgb(250, 250, 250)\";\n        canvasContext.ctx.textAlign = \"center\";\n        canvasContext.ctx.textBaseline = \"center\";\n        canvasContext.ctx.fillText(\"Credit : Freuhlon\", (canvasContext.screenWidth / 2), this.imageTitlePosition + 440);\n\n\n    }\n\n    manageOverflowMenu(minSelectableOption, maxSelectableOption, selectedOption) {\n        this.selectedOption = selectedOption;\n        if (selectedOption > maxSelectableOption) {\n            this.selectedOption = maxSelectableOption;\n            document.dispatchEvent(new CustomEvent('action', {\n                detail: {\n                    type: Action.MENU_OVERFLOW,\n                    payload: {selectedOption: this.selectedOption}\n                }\n            }));\n        }\n        if (selectedOption < minSelectableOption) {\n            this.selectedOption = minSelectableOption;\n            document.dispatchEvent(new CustomEvent('action', {\n                detail: {\n                    type: Action.MENU_OVERFLOW,\n                    payload: {selectedOption: this.selectedOption}\n                }\n            }));\n        }\n    }\n\n    static getNewScreen(selectionOption, currentScreen, gameStatus) {\n        if (currentScreen === \"TITLE\") {\n            if (selectionOption === 1 && gameStatus === GAMESTATUS.READY) {\n                return \"NEW_GAME\";\n            } else if (selectionOption === 2) {\n                return \"OPTIONS\"\n            }\n        }\n        if (currentScreen === \"OPTIONS\") {\n            return \"TITLE\";\n        }\n    }\n\n}","import {Menu} from \"./menu\";\nimport {GAMESTATUS} from \"../game/geme-status\";\n\nexport class Title extends Menu {\n\n    constructor() {\n        super();\n        this.code = \"TITLE\";\n        this.ready = false;\n        document.addEventListener('state', (state) => {\n            this.manageOverflowMenu(1, 2, state.detail.selectedOption);\n            this.ready = state.detail.gameStatus === GAMESTATUS.READY;\n        });\n\n    }\n\n    render(canvasContext) {\n        super.render(canvasContext);\n        canvasContext.ctx.font = 60 + \"px Bomberman\";\n        canvasContext.ctx.fillStyle = this.getColorMenu(\"New Game\");\n        canvasContext.ctx.fillText(\"New Game\", canvasContext.screenWidth / 2, 330);\n        canvasContext.ctx.fillStyle = this.getColorMenu(\"Options\");\n        canvasContext.ctx.fillText(\"Options\", canvasContext.screenWidth / 2, 420);\n\n    }\n\n    getColorMenu(menu) {\n\n        if (menu === \"New Game\" && this.selectedOption === 1 && this.ready) {\n            return \"yellow\";\n        } else if(menu === \"New Game\" && this.selectedOption === 1 && !this.ready) {\n            return \"rgb(169,169,169)\";\n        } else if (menu === \"Options\" && this.selectedOption === 2) {\n            return \"yellow\";\n        } else {\n            return \"rgb(250, 250, 250)\"\n        }\n\n    }\n\n}","import {Sprite} from \"../utils/sprite\";\nimport {Action} from \"../state/actions\";\n\nexport class Bomb {\n    constructor(character) {\n        this.character = character;\n        this.x = character.x;\n        this.y = character.y;\n        this.animationState = 0;\n        this.animationDuration = 16;\n        this.timeElapsed = 0;\n        this.time = 0;\n        this.accelerator = 30;\n        this.timer = 128;\n\n    }\n\n    render(canvasContext) {\n        this.time++;\n\n        let frame = 0;\n        frame = Math.floor(this.animationState / this.animationDuration);\n        if (frame > 2) {\n            frame %= 3;\n        }\n        this.animationState++;\n\n        if (this.timeElapsed++ > this.accelerator) {\n            if (this.animationDuration < 4) {\n                const currentBomb = this;\n                const character = this.character;\n                document.dispatchEvent(new CustomEvent('action', {\n                    detail: {\n                        type: Action.ADD_BLAST,\n                        payload: {bomb: currentBomb, character: character}\n                    }\n                }));\n                document.dispatchEvent(new CustomEvent('action', {\n                    detail: {\n                        type: Action.BOMB_EXPLODED,\n                        payload: {bomb: currentBomb}\n                    }\n                }));\n            }\n\n            this.animationDuration = this.animationDuration / 2;\n            this.timeElapsed = 0;\n        }\n\n\n        canvasContext.ctx.drawImage(\n            Sprite.bomb(),\n            frame * Sprite.bomb().width,\n            0,\n            Sprite.bomb().width,\n            Sprite.bomb().height,\n            this.x * 32 + 4,\n            this.y * 32 + 6,\n            32 / 1.5,\n            32 / 1.5\n        );\n    }\n}","import {Sprite} from \"../utils/sprite\";\n\nexport class Flame {\n    constructor(x, y, power, cardinal) {\n        this.x=x;\n        this.y=y;\n        this.power = power;\n        this.cardinal = cardinal;\n    }\n\n    render(canvasContext) {\n        canvasContext.ctx.drawImage(\n            Sprite.flame(),\n            Sprite.flame().width * this.cardinal - this.power * Sprite.flame().width,\n            0,\n            Sprite.flame().width,\n            Sprite.flame().height,\n            this.x * 32,\n            this.y * 32,\n            34,\n            34\n        );\n    }\n}","export const CARDINAL = {\n    MIDDLE    : 27,\n    NORTH_MIDDLE : 3,\n    EAST_MIDDLE : 7,\n    SOUTH_MIDDLE   : 3,\n    WEST_MIDDLE   : 7,\n    NORTH_END : 11,\n    EAST_END : 23,\n    SOUTH_END   : 19,\n    WEST_END   : 15\n};\n\nObject.freeze(CARDINAL);","export const CharacterStatus = {\n    ALIVE : \"ALIVE\",\n    VICTORIOUS : \"VICTORIOUS\",\n    DEAD : \"DEAD\"\n};\n\nObject.freeze(CharacterStatus);","import {Flame} from \"./flame\";\nimport {CARDINAL} from \"./cardinal\";\nimport {Action} from \"../state/actions\";\nimport {CharacterStatus} from \"./character-status\";\n\nexport class Blast {\n    constructor(bomb, character, map, walls, bombs, characters, bonus) {\n        this.walls = walls;\n        this.map = map;\n        this.x = bomb.x;\n        this.y = bomb.y;\n        this.animationState = 0;\n        this.time = 0;\n        this.radius = character.radius;\n        this.timer = 20;\n        this.flames = [];\n        this.bombs = bombs;\n        this.characters = characters;\n        this.character = character;\n        this.bonus = bonus;\n        this.canPropagate = {north: true, east: true, south : true, west: true}\n    }\n\n    render(canvasContext) {\n        let radius = this.radius;\n        this.animationState++;\n\n        if (this.time++ > this.timer) {\n            const currentBlast = this;\n            document.dispatchEvent(new CustomEvent('action', {\n                detail: {\n                    type: Action.BLAST_VANISHED,\n                    payload: {blast: currentBlast}\n                }\n            }));\n        }\n\n        let power = this.computePower();\n\n        if (this.animationState <= this.radius) {\n            radius = this.animationState;\n        }\n\n        this.flames.push(new Flame(this.x, this.y, power, CARDINAL.MIDDLE));\n\n        this.computeNorth(radius, power, this.canPropagate.north);\n        this.computeEast(radius, power, this.canPropagate.east);\n        this.computeSouth(radius, power, this.canPropagate.south);\n        this.computeWest(radius, power, this.canPropagate.west);\n\n        this.flames.forEach(flame => {\n            flame.render(canvasContext);\n\n            this.bombs.forEach(bomb => {\n                if (bomb.x === flame.x && bomb.y === flame.y) {\n\n                    document.dispatchEvent(new CustomEvent('action', {\n                        detail: {\n                            type: Action.ADD_BLAST,\n                            payload: {bomb, character : bomb.character}\n                        }\n                    }));\n\n                    document.dispatchEvent(new CustomEvent('action', {\n                        detail: {\n                            type: Action.BOMB_EXPLODED,\n                            payload: {bomb: bomb}\n                        }\n                    }));\n                }\n            });\n\n            this.bonus.forEach(item => {\n                if(item.x === flame.x && item.y === flame.y) {\n                    document.dispatchEvent(new CustomEvent('action', {\n                        detail: {\n                            type: Action.BONUS_EXPLODED,\n                            payload: {item}\n                        }\n                    }));\n                }\n            });\n\n            this.characters.forEach(character => {\n                if (character.x === flame.x && character.y === flame.y && character.status === CharacterStatus.ALIVE) {\n                    document.dispatchEvent(new CustomEvent('action', {\n                        detail: {\n                            type: Action.KILL,\n                            payload: {character: character}\n                        }\n                    }));\n                }\n            });\n\n        });\n    }\n\n    computeNorth(radius, power) {\n        let indexBlastNorth = 1;\n        while (indexBlastNorth < this.radius) {\n\n            const canPropagate =\n                this.map[this.y - indexBlastNorth][this.x] === 2 && this.canPropagate.north;\n            const canVanish = this.walls[this.x][this.y - indexBlastNorth] && !this.walls[this.x][this.y - indexBlastNorth].destroyed;\n\n            if(!canPropagate) {\n                break;\n            } else if (canVanish && canPropagate) {\n                this.canPropagate.north = false;\n                this.flames.push(new Flame(this.x, this.y - indexBlastNorth, power, CARDINAL.NORTH_END));\n                document.dispatchEvent(new CustomEvent('action', {\n                    detail: {\n                        type: Action.DESTROY,\n                        payload: {destroyedX: this.x, destroyedY: this.y - 1}\n                    }\n                }));\n\n            } else if(!canVanish && canPropagate) {\n                if ((indexBlastNorth + 1) === this.radius) {\n                    this.flames.push(new Flame(this.x, this.y - indexBlastNorth, power, CARDINAL.NORTH_END));\n                } else {\n                    this.flames.push(new Flame(this.x, this.y - indexBlastNorth, power, CARDINAL.NORTH_MIDDLE));\n                }\n            }\n            indexBlastNorth++;\n\n        }\n    }\n\n    computeEast(radius, power) {\n        let indexBlastEast = 1;\n        while (indexBlastEast < this.radius) {\n\n            const canPropagate =\n                this.map[this.y][this.x + indexBlastEast] === 2 && this.canPropagate.east;\n            const canVanish = this.walls[this.x + indexBlastEast][this.y] && !this.walls[this.x + indexBlastEast][this.y].destroyed;\n\n            if(!canPropagate) {\n                break;\n            } else if (canPropagate && canVanish) {\n                this.canPropagate.east = false;\n                this.flames.push(new Flame(this.x + indexBlastEast, this.y, power, CARDINAL.EAST_END));\n                document.dispatchEvent(new CustomEvent('action', {\n                    detail: {\n                        type: Action.DESTROY,\n                        payload: {destroyedX: this.x + indexBlastEast, destroyedY: this.y}\n                    }\n                }));\n\n            } else if(canPropagate && !canVanish) {\n                if ((indexBlastEast + 1) === this.radius) {\n                    this.flames.push(new Flame(this.x + indexBlastEast, this.y, power, CARDINAL.EAST_END));\n                } else {\n                    this.flames.push(new Flame(this.x + indexBlastEast, this.y, power, CARDINAL.EAST_MIDDLE));\n                }\n            }\n            indexBlastEast++;\n\n        }\n    }\n\n    computeSouth(radius, power) {\n        let indexBlastSouth = 1;\n        while (indexBlastSouth < this.radius) {\n\n            const canPropagate =\n                this.map[this.y + indexBlastSouth][this.x] === 2 && this.canPropagate.south;\n            const canVanish = this.walls[this.x][this.y + indexBlastSouth] && !this.walls[this.x][this.y + indexBlastSouth].destroyed;\n\n            if(!canPropagate) {\n                break;\n            } else if (canPropagate && canVanish) {\n                this.canPropagate.south = false;\n                this.flames.push(new Flame(this.x, this.y + indexBlastSouth, power, CARDINAL.SOUTH_END));\n                document.dispatchEvent(new CustomEvent('action', {\n                    detail: {\n                        type: Action.DESTROY,\n                        payload: {destroyedX: this.x, destroyedY: this.y + indexBlastSouth}\n                    }\n                }));\n\n            } else if(canPropagate && !canVanish) {\n                if ((indexBlastSouth + 1) === this.radius) {\n                    this.flames.push(new Flame(this.x, this.y + indexBlastSouth, power, CARDINAL.SOUTH_END));\n                } else {\n                    this.flames.push(new Flame(this.x, this.y + indexBlastSouth, power, CARDINAL.SOUTH_MIDDLE));\n                }\n            }\n            indexBlastSouth++;\n\n        }\n    }\n\n    computeWest(radius, power) {\n\n        let indexBlastWest = 1;\n        while (indexBlastWest < this.radius) {\n\n            const canPropagate =\n                this.map[this.y][this.x - indexBlastWest] === 2 && this.canPropagate.west;\n            const canVanish = this.walls[this.x - indexBlastWest][this.y] && !this.walls[this.x - indexBlastWest][this.y].destroyed;\n\n            if(!canPropagate) {\n                break;\n            } else if (canPropagate && canVanish) {\n                this.canPropagate.west = false;\n                this.flames.push(new Flame(this.x - indexBlastWest, this.y, power, CARDINAL.WEST_END));\n                document.dispatchEvent(new CustomEvent('action', {\n                    detail: {\n                        type: Action.DESTROY,\n                        payload: {destroyedX: this.x - indexBlastWest, destroyedY: this.y}\n                    }\n                }));\n\n            } else if(canPropagate && !canVanish) {\n                if ((indexBlastWest + 1) === this.radius) {\n                    this.flames.push(new Flame(this.x - indexBlastWest, this.y, power, CARDINAL.WEST_END));\n                } else {\n                    this.flames.push(new Flame(this.x - indexBlastWest, this.y, power, CARDINAL.WEST_MIDDLE));\n                }\n            }\n            indexBlastWest++;\n\n        }\n    }\n\n    computePower() {\n        let power = 0;\n        switch (this.radius) {\n            case 1 :\n                power = 0;\n                break;\n            case 2 :\n                power = 0;\n                break;\n            case 3 :\n                power = 1;\n                break;\n            case 4 :\n                power = 1;\n                break;\n            case 5 :\n                power = 2;\n                break;\n            case 6 :\n                power = 2;\n                break;\n        }\n        return power;\n    }\n}","export const DIRECTION = {\n    DOWN: 1,\n    LEFT: 7,\n    RIGHT: 4,\n    TOP: 10\n};\n\nObject.freeze(DIRECTION);","import {DIRECTION} from \"./direction\";\nimport {Sprite} from \"../utils/sprite\";\nimport {CharacterStatus} from \"./character-status\";\nimport {Action} from \"../state/actions\";\n\nexport class Character {\n\n    constructor(color, x, y, direction, gamePadIndex) {\n        this.x = x;\n        this.y = y;\n        this.direction = direction;\n        this.animationState = -1;\n        this.color = color;\n        this.radius = 2;\n        this.status = CharacterStatus.ALIVE;\n        this.offsetX = 0;\n        this.offsetY = 0;\n        this.animationDuration = 15;\n        this.bombMax = 1;\n        this.bombUsed = 0;\n        this.pixelsToTreat = 0;\n        this.gamePadIndex = gamePadIndex;\n        this.nextFrame = this.getNextFrame(direction);\n        document.addEventListener('state', (state) => {\n            this.bonus = state.detail.bonus;\n            const player = state.detail.characters.find(character => character.color === state.detail.currentPlayerColor);\n            if(player) {\n                this.radius = player.radius;\n                this.animationDuration = player.animationDuration;\n                this.bombMax = player.bombMax;\n            }\n\n        });\n    }\n\n\n    render(canvasContext) {\n\n        switch (this.status) {\n            case CharacterStatus.ALIVE:\n                this.renderAlive(canvasContext);\n                break;\n            case CharacterStatus.DEAD:\n                this.renderDead(canvasContext);\n                break;\n            case CharacterStatus.VICTORIOUS:\n                this.renderVictory(canvasContext);\n                break;\n        }\n    }\n\n    renderAlive(canvasContext) {\n        let frame = 1;\n        if (this.animationState >= this.animationDuration) {\n            this.animationState = -1;\n        } else if (this.animationState >= 0) {\n            frame = Math.floor(this.animationState / 8);\n            if (frame > 3) {\n                frame %= 4;\n            }\n\n            this.pixelsToTreat = 32 - (32 * (this.animationState / this.animationDuration));\n\n            if (this.pixelsToTreat < 32 / 2) {\n                this.x = this.nextFrame.x;\n                this.y = this.nextFrame.y;\n            }\n\n            if (this.direction === DIRECTION.TOP) {\n                this.offsetY = this.pixelsToTreat;\n            } else if (this.direction === DIRECTION.DOWN) {\n                this.offsetY = -this.pixelsToTreat;\n            } else if (this.direction === DIRECTION.LEFT) {\n                this.offsetX = this.pixelsToTreat;\n            } else if (this.direction === DIRECTION.RIGHT) {\n                this.offsetX = -this.pixelsToTreat;\n            }\n\n            this.animationState++;\n        }\n\n        const getNextImageFrame = () => {\n            switch (frame) {\n                case 0 :\n                    return 1;\n                case 1 :\n                    return 0;\n                case 2 :\n                    return -1;\n                case 3 :\n                    return 0;\n\n            }\n        };\n\n        let targetX;\n        let targetY;\n        if (this.animationState !== -1) {\n            targetX = this.nextFrame.x * 32 + this.offsetX;\n            targetY = this.nextFrame.y * 32 - 8 + this.offsetY;\n        } else {\n            targetX = this.x * 32 + this.offsetX;\n            targetY = this.y * 32 - 8 + this.offsetY;\n        }\n        canvasContext.ctx.drawImage(\n            Sprite.characterAlive(),\n            Sprite.characterAlive().width * (getNextImageFrame() + this.direction),\n            Sprite.characterAlive().height * this.color,\n            Sprite.characterAlive().width,\n            Sprite.characterAlive().height,\n            targetX,\n            targetY,\n            32,\n            32\n        );\n    }\n\n    getNextFrame(direction) {\n        let coord = {x: this.x, y: this.y};\n        switch (direction) {\n            case DIRECTION.DOWN :\n                coord.y++;\n                break;\n            case DIRECTION.LEFT :\n                coord.x--;\n                break;\n            case DIRECTION.RIGHT :\n                coord.x++;\n                break;\n            case DIRECTION.TOP :\n                coord.y--;\n                break;\n        }\n        return coord;\n    }\n\n    move(direction, state) {\n        if (this.animationState >= 0)\n            return;\n\n        if (!direction) {\n            return;\n        }\n\n        this.direction = direction;\n\n        this.nextFrame = this.getNextFrame(direction);\n\n        if (this.nextFrame.x < 0 || this.nextFrame.y < 0 ||\n            this.nextFrame.x >= state.map[0].length || this.nextFrame.y >= state.map.length) {\n            return;\n        }\n\n        if (state.map[this.nextFrame.y][this.nextFrame.x] !== 2) {\n            return;\n        }\n\n        if (state.walls[this.nextFrame.x][this.nextFrame.y] && !state.walls[this.nextFrame.x][this.nextFrame.y].destroyed) {\n            return;\n        }\n\n\n        this.bonus.forEach(bonus => {\n            if (bonus.x === this.nextFrame.x && bonus.y === this.nextFrame.y) {\n                document.dispatchEvent(new CustomEvent('action', {\n                    detail: {\n                        type: Action.GET_BONUS,\n                        payload: {\n                            bonus: bonus,\n                            playerColor: this.color\n                        }\n                    }\n                }));\n            }\n        });\n\n        for (let bomb in state.bombs) {\n            if (state.bombs[bomb].x === this.nextFrame.x && state.bombs[bomb].y === this.nextFrame.y) {\n                return;\n            }\n        }\n\n        this.animationState = 1;\n\n    }\n\n    renderDead(canvasContext) {\n\n        if (this.status === CharacterStatus.ALIVE) {\n            this.status = CharacterStatus.DEAD;\n            this.animationState = 0;\n        }\n\n        canvasContext.ctx.drawImage(\n            Sprite.characterDead(),\n            Sprite.characterDead().width * Math.floor(this.animationState / 10),\n            Sprite.characterDead().height * this.color,\n            Sprite.characterDead().width,\n            Sprite.characterDead().height,\n            this.x * 32,\n            this.y * 32,\n            32,\n            32\n        );\n\n        this.animationState++;\n\n    }\n\n    renderVictory(canvasContext) {\n\n        let frame = Math.floor(this.animationState / this.animationDuration);\n\n        let image = 1;\n        if(frame % 2 === 0) {\n            image = 0\n        } else {\n            image = 1;\n        }\n\n        canvasContext.ctx.drawImage(\n            Sprite.characterVictory(),\n            Sprite.characterVictory().width * image,\n            Sprite.characterVictory().height * this.color,\n            Sprite.characterVictory().width,\n            Sprite.characterVictory().height,\n            this.x * 32,\n            this.y * 32,\n            32,\n            32\n        );\n        this.animationState++;\n    }\n}","export const BONUSTYPE = {\n    BOMB : 0,\n    POWER : 1,\n    SPEED : 3\n};\n\nObject.freeze(BONUSTYPE);","export class Music {\n\n    static menu() {\n\n        return import('../assets/songs/TITLE_MUSIC.ogg').then((module) => {\n            const song = module.default;\n            const audio = new Audio(song);\n            audio.load();\n            audio.loop = true;\n            return audio;\n        })\n\n    }\n\n    static menuNext() {\n\n        return import('../assets/songs/MENU_NEXT.ogg').then((module) => {\n            const song = module.default;\n            const audio = new Audio(song);\n            audio.load();\n            return audio;\n        })\n\n    }\n\n    static menuPrevious() {\n\n        return import('../assets/songs/MENU_PREVIOUS.ogg').then((module) => {\n            const song = module.default;\n            const audio = new Audio(song);\n            audio.load();\n            return audio;\n        })\n\n    }\n\n    static menuBeep() {\n\n        return import('../assets/songs/MENU_BEEP.ogg').then((module) => {\n            const song = module.default;\n            const audio = new Audio(song);\n            audio.load();\n            return audio;\n        })\n\n    }\n\n    static bombDrop() {\n\n        return import('../assets/songs/BOMB_DROP.ogg').then((module) => {\n            const song = module.default;\n            const audio = new Audio(song);\n            audio.load();\n            return audio;\n        })\n\n    }\n\n    static death() {\n\n        return import('../assets/songs/BOMBER_DEATH.ogg').then((module) => {\n            const song = module.default;\n            const audio = new Audio(song);\n            audio.load();\n            return audio;\n        })\n\n    }\n\n    static explosion() {\n        return import('../assets/songs/EXPLOSION_02_2.ogg').then((module) => {\n            const song = module.default;\n            const audio = new Audio(song);\n            audio.load();\n            return audio;\n        })\n    }\n\n    static bonus() {\n        return import('../assets/songs/BREAK_1.ogg').then((module) => {\n            const song = module.default;\n            const audio = new Audio(song);\n            audio.load();\n            return audio;\n        })\n    }\n\n    static win() {\n\n        return import('../assets/songs/VICTORY.ogg').then((module) => {\n            const song = module.default;\n            const audio = new Audio(song);\n            audio.load();\n            return audio;\n        })\n\n    }\n}","import {Menu} from \"./menu\";\n\nexport class Options extends Menu {\n    constructor() {\n        super();\n        this.code = \"OPTIONS\";\n        document.addEventListener('state', (state) => {\n            this.manageOverflowMenu(1, 2, state.detail.selectedOption);\n        });\n    }\n\n    render(canvasContext) {\n        super.render(canvasContext);\n\n        canvasContext.ctx.font = 50 + \"px Bomberman\";\n        canvasContext.ctx.fillStyle = this.getColorMenu(\"Sound\");\n        canvasContext.ctx.fillText(\" Sound : yes\", canvasContext.screenWidth / 2, 330);\n        canvasContext.ctx.fillStyle = this.getColorMenu(\"Retour\");\n        canvasContext.ctx.fillText(\"Retour\", canvasContext.screenWidth / 2, 420);\n    }\n\n    getColorMenu(menu) {\n\n        if (menu === \"Sound\" && this.selectedOption === 1\n            || menu === \"Retour\" && this.selectedOption === 2) {\n            return \"yellow\";\n        } else {\n            return \"rgb(250, 250, 250)\"\n        }\n\n    }\n}","import {Sprite} from \"../utils/sprite\";\n\nexport class Ground {\n    constructor(canvasContext) {\n        this.canvasContext = canvasContext;\n    }\n\n    render(x, y) {\n        this.canvasContext.ctx.drawImage(Sprite.ground(), 0, 0, 32, 32, 32 * y, 32 * x, 32, 32);\n    }\n\n}","import {Sprite} from \"../utils/sprite\";\n\nexport class Board {\n    constructor(type, canvasContext) {\n        this.type = type;\n        this.canvasContext = canvasContext;\n    }\n\n    render(x, y) {\n        switch (this.type) {\n            case \"UP_LEFT\":\n                this.canvasContext.ctx.drawImage(Sprite.ground(), 96, 64, 32, 32, 32 * y, 32 * x, 32, 32);\n                break;\n            case \"UP_RIGHT\":\n                this.canvasContext.ctx.drawImage(Sprite.ground(), 96, 96, 32, 32, 32 * y, 0, 32, 32);\n                break;\n            case \"BOTTOM_LEFT\":\n                this.canvasContext.ctx.drawImage(Sprite.ground(), 96, 32, 32, 32, 0, 32 * x, 32, 32);\n                break;\n            case \"UP\":\n                this.canvasContext.ctx.drawImage(Sprite.ground(), 32 , 96 , 32 , 32, 32 * y, 0, 32 , 32);\n                break;\n            case \"BOTTOM_RIGHT\":\n                this.canvasContext.ctx.drawImage(Sprite.ground(), 96, 0, 32, 32, 32 * y, 32 * x, 32, 32);\n                break;\n            case \"BOTTOM\":\n                this.canvasContext.ctx.drawImage(Sprite.ground(), 32, 32, 32, 32, 32 * y, 32 * x, 32, 32);\n                break;\n            case \"LEFT\":\n                this.canvasContext.ctx.drawImage(Sprite.ground(), 64, 64, 32, 32, 32 * y, 32 * x, 32, 32);\n                break;\n            case \"RIGHT\":\n                this.canvasContext.ctx.drawImage(Sprite.ground(), 0, 64, 32, 32, 32 * y, 32 * x, 32, 32);\n                break;\n\n        }\n\n    }\n}","import {Sprite} from \"../utils/sprite\";\n\nexport class Block {\n    constructor(canvasContext) {\n        this.canvasContext = canvasContext;\n    }\n\n    render(x, y) {\n        this.canvasContext.ctx.drawImage(Sprite.ground(), 32, 64, 32, 32, 32 * y , 32 * x , 32, 32);\n    }\n}","import {Ground} from \"./ground\";\nimport {Board} from \"./board\";\nimport {Block} from \"./block\";\nimport {CharacterStatus} from \"./character-status\";\nimport {Action} from \"../state/actions\";\n\nexport class Game {\n    constructor(map, walls, characters, bonus) {\n        this.map = map;\n        this.characters = characters;\n        this.walls = walls;\n        this.bonus = bonus;\n        this.bombs = [];\n        this.blasts = [];\n        this.code = \"NEW_GAME\";\n\n        document.addEventListener('state', (state) => {\n            this.walls = state.detail.walls;\n            this.characters = state.detail.characters;\n            this.bonus = state.detail.bonus;\n            this.bombs = state.detail.bombs;\n            this.blasts = state.detail.blasts;\n            this.map = state.detail.map;\n        });\n    }\n\n    update(canvasContext) {\n        this.render(canvasContext);\n    }\n\n    render(canvasContext) {\n\n        const canvas = document.getElementById('canvas');\n        canvas.width = this.map[0] && this.map[0].length * 32;\n        canvas.height = this.map.length * 32;\n\n        canvasContext.screenWidth = canvas.width;\n        canvasContext.screenHeight = canvas.height;\n\n        canvasContext.ctx.fillStyle = \"black\";\n        canvasContext.ctx.fillRect(0, 0, canvasContext.screenWidth, canvasContext.screenHeight);\n\n        this.ground = new Ground(canvasContext);\n        this.frameUpLeft = new Board(\"UP_LEFT\", canvasContext);\n        this.frameUpRight = new Board(\"UP_RIGHT\", canvasContext);\n        this.frameUp = new Board(\"UP\", canvasContext);\n        this.frameBottomLeft = new Board(\"BOTTOM_LEFT\", canvasContext);\n        this.frameBottomRight = new Board(\"BOTTOM_RIGHT\", canvasContext);\n        this.frameBottom = new Board(\"BOTTOM\", canvasContext);\n        this.frameLeft = new Board(\"LEFT\", canvasContext);\n        this.frameRight = new Board(\"RIGHT\", canvasContext);\n        this.block = new Block(canvasContext);\n\n        for (let x = 0, l = this.map.length; x < l; x++) {\n            for (let y = 0, k = this.map[x].length; y < k; y++) {\n                switch (this.map[x][y]) {\n                    case 2:\n                        this.ground.render(x, y);\n                        break;\n                    case 12:\n                        this.frameUpLeft.render(x, y);\n                        break;\n                    case 14:\n                        this.frameUp.render(x, y);\n                        break;\n                    case 16:\n                        this.frameUpRight.render(x, y);\n                        break;\n                    case 8:\n                        this.frameBottomLeft.render(x, y);\n                        break;\n                    case 4:\n                        this.frameBottomRight.render(x, y);\n                        break;\n                    case 6:\n                        this.frameBottom.render(x, y);\n                        break;\n                    case 11:\n                        this.frameLeft.render(x, y);\n                        break;\n                    case 9:\n                        this.frameRight.render(x, y);\n                        break;\n                    case 10:\n                        this.block.render(x, y);\n                }\n\n            }\n        }\n\n        this.bonus.forEach(bonus => {\n            bonus.render(canvasContext);\n        });\n\n        for (let i = 0, l = this.walls.length; i < l; i++) {\n            for (let j = 0, m = this.walls[i].length; j < m; j++) {\n                if (this.walls[i][j]) {\n                    this.walls[i][j].render(canvasContext);\n                }\n            }\n        }\n\n        this.bombs.forEach(bomb => {\n            bomb.render(canvasContext);\n        });\n\n        this.blasts.forEach(blast => {\n            blast.render(canvasContext);\n        });\n\n        this.characters.forEach(character => {\n            character.render(canvasContext);\n        });\n\n        this.computeVictory(this.characters)\n\n    }\n\n    computeVictory(characters) {\n\n        const aliveCharacters = this.characters.filter(character => character.status === CharacterStatus.ALIVE);\n        if (aliveCharacters.length === 1 && aliveCharacters[0].status !== CharacterStatus.VICTORY) {\n            document.dispatchEvent(new CustomEvent('action', {\n                detail: {\n                    type: Action.VICTORY, payload: {\n                        character: aliveCharacters[0]\n                    }\n                }\n            }));\n        }\n    }\n}","import {Sprite} from \"../utils/sprite\";\n\nexport class Wall {\n    constructor(x, y, destroyed) {\n        this.x = x;\n        this.y = y;\n        this.animationState = 0;\n        this.animationDuration = 6;\n        this.destroyed = destroyed;\n    }\n\n    render(canvasContext) {\n        let frame = 0;\n\n        if (this.destroyed) {\n            frame = Math.floor(this.animationState / this.animationDuration);\n            this.animationState++;\n        }\n\n        canvasContext.ctx.drawImage(\n            Sprite.wall(),\n            frame * Sprite.wall().width,\n            0,\n            Sprite.wall().width,\n            Sprite.wall().height,\n            this.x * 32,\n            this.y * 32,\n            32,\n            32\n        );\n\n    }\n\n\n}","import {Sprite} from \"../utils/sprite\";\n\nexport class Bonus {\n\n    constructor(x, y, type) {\n        this.type = type;\n        this.x = x;\n        this.y = y;\n        this.etatAnimation = 0;\n        this.dureeAnimation = 16;\n    }\n\n    render(canvasContext) {\n        let frame = Math.floor(this.etatAnimation / this.dureeAnimation);\n        if (frame > 1) {\n            frame %= 2;\n        }\n\n        canvasContext.ctx.drawImage(\n            Sprite.bonus(),\n            (frame + this.type * 2) * Sprite.bonus().width,\n            0,\n            Sprite.bonus().width,\n            Sprite.bonus().height,\n            this.x * 32 + 4,\n            this.y * 32 + 6,\n            32 / 1.5,\n            32 / 1.5\n        );\n\n        this.etatAnimation++;\n    }\n}","import {Wall} from \"../game/wall\";\nimport {Bonus} from \"../game/bonus\";\nimport {BONUSTYPE} from \"../game/bonus-type\";\n\nexport class GameUtils {\n    constructor() {\n\n    }\n\n    static initWalls(map, characters) {\n        let walls = [];\n\n        for (let x = 0, l = map[0].length; x < l; x++) {\n            walls[x] = [];\n            for (let y = 0, z = map.length; y < z; y++) {\n                if (map[y][x] === 2) {\n                    if (this.getRandomInt(11) > 1) {\n                        walls[x][y] = new Wall(x, y);\n                    }\n                }\n            }\n        }\n\n        characters.forEach(character => {\n            if (walls[character.x] && walls[character.x][character.y]) {\n                walls[character.x][character.y] = null;\n            }\n            if (walls[character.x - 1] && walls[character.x - 1][character.y]) {\n                walls[character.x - 1][character.y] = null;\n            }\n            if (walls[character.x] && walls[character.x][character.y - 1]) {\n                walls[character.x][character.y - 1] = null;\n            }\n            if (walls[character.x + 1] && walls[character.x + 1][character.y]) {\n                walls[character.x + 1][character.y] = null;\n            }\n            if (walls[character.x] && walls[character.x][character.y + 1]) {\n                walls[character.x][character.y + 1] = null;\n            }\n        });\n\n\n        return walls;\n    }\n\n    static initBonus(map, characters) {\n\n        const bonus = [];\n        const excludedCoords = [];\n        characters.map(character => {\n            return {x : character.x, y: character.y};\n        }).forEach(coords => {\n            excludedCoords.push(coords.x.toString()+coords.y.toString());\n            excludedCoords.push((coords.x - 1).toString()+(coords.y).toString());\n            excludedCoords.push((coords.x).toString()+(coords.y - 1).toString());\n            excludedCoords.push((coords.x + 1).toString()+(coords.y).toString());\n            excludedCoords.push((coords.x).toString()+(coords.y + 1 ).toString());\n        });\n\n        for (let x = 0, l = map[0].length; x < l; x++) {\n            for (let y = 0, z = map.length; y < z; y++) {\n                if (map[y][x] === 2) {\n                    let randomInt = this.getRandomInt(20);\n                    if(excludedCoords.includes(x.toString()+y.toString())) {\n                        continue;\n                    }\n\n                    switch (randomInt) {\n                        case 1:\n                            bonus.push(new Bonus(x, y, BONUSTYPE.BOMB));\n                            break;\n                        case 10:\n                            bonus.push(new Bonus(x, y, BONUSTYPE.POWER));\n                            break;\n                    }\n                }\n            }\n        }\n\n        return bonus;\n    }\n\n    static getRandomInt(max) {\n        return Math.floor(Math.random() * Math.floor(max));\n    }\n}","import {Title} from \"./menus/title\";\nimport {State} from \"./state/state\";\nimport {Keyboard} from \"./utils/keyboard\";\nimport {Options} from \"./menus/options\";\nimport {Game} from \"./game/game\";\nimport {Action} from \"./state/actions\";\nimport {GAMESTATUS} from \"./game/geme-status\";\nimport {GamePad} from \"./utils/gamepad\";\nimport {GameUtils} from \"./utils/game-utils\";\nimport {Music} from \"./utils/music\";\n\nconst screenWidth = 960;\nconst screenHeight = 640;\n\nconst canvas = document.getElementById('canvas');\ncanvas.width = screenWidth;\ncanvas.height = screenHeight;\nconst ctx = canvas.getContext('2d');\n\nconst canvasContext = {\n    screenWidth,\n    screenHeight,\n    ctx\n};\n\nconst state = new State();\nstate.createStore();\n\nconst controller = new Keyboard();\ncontroller.bind();\nconst gamepads = new GamePad();\n\nlet currentScreen = new Title();\nlet songMenu;\nMusic.menu().then(song => {\n    songMenu = song\n    songMenu.play();\n});\ndocument.addEventListener('state', (state) => {\n    if (currentScreen.code !== state.detail.currentScreenCode) {\n        switch (state.detail.currentScreenCode) {\n            case 'TITLE':\n                currentScreen = new Title();\n                break;\n            case 'OPTIONS':\n                currentScreen = new Options();\n                break;\n            case 'NEW_GAME': {\n                songMenu.pause();\n                const walls = GameUtils.initWalls(state.detail.map, state.detail.characters);\n                const bonus = GameUtils.initBonus(state.detail.map, state.detail.characters);\n                document.dispatchEvent(new CustomEvent('action', {\n                    detail: {\n                        type: Action.INIT_GAME,\n                        payload: {\n                            status: GAMESTATUS.IN_PROGRESS,\n                            walls,\n                            bonus\n                        }\n                    }\n                }));\n                currentScreen = new Game(state.detail.map, walls, state.detail.characters, bonus);\n            }\n        }\n    }\n});\n\n\nconst step = () => {\n    currentScreen.update(canvasContext);\n    gamepads.listen();\n    requestAnimationFrame(step);\n};\n\nrequestAnimationFrame(step);\n\nconst metrics = {\n    width: 0,\n    height: 0,\n    computedWidth: function () { // computed width\n        return metrics.width;\n    },\n    computedHeight: function () { // computed height\n        return metrics.height;\n    }\n};\n\nconst stretch = () => {\n    metrics.width = document.body.offsetWidth;\n    metrics.height = document.body.offsetHeight;\n    canvas.style.width = metrics.computedWidth() + 'px';\n    canvas.style.height = metrics.computedHeight() + 'px';\n};\n\nstretch();\nwindow.addEventListener('resize', stretch, false);\n","import {Bomb} from \"../game/bomb\";\nimport {Blast} from \"../game/blast\";\nimport {CharacterStatus} from \"../game/character-status\";\nimport {Menu} from \"../menus/menu\";\nimport {Action} from \"./actions\";\nimport {Character} from \"../game/character\";\nimport {COLOR} from \"../game/color\";\nimport {DIRECTION} from \"../game/direction\";\nimport {BONUSTYPE} from \"../game/bonus-type\";\nimport {GAMESTATUS} from \"../game/geme-status\";\nimport {Music} from \"../utils/music\";\n\nexport class State {\n\n    constructor() {\n        this.initialState();\n    }\n\n    initialState() {\n\n        const map = [\n            [12, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 16],\n            [11, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 9],\n            [11, 2, 10, 2, 10, 2, 10, 2, 10, 2, 10, 2, 10, 2, 9],\n            [11, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 9],\n            [11, 2, 10, 2, 10, 2, 10, 2, 10, 2, 10, 2, 10, 2, 9],\n            [11, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 9],\n            [11, 2, 10, 2, 10, 2, 10, 2, 10, 2, 10, 2, 10, 2, 9],\n            [11, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 9],\n            [11, 2, 10, 2, 10, 2, 10, 2, 10, 2, 10, 2, 10, 2, 9],\n            [11, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 9],\n            [11, 2, 10, 2, 10, 2, 10, 2, 10, 2, 10, 2, 10, 2, 9],\n            [11, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 9],\n            [8, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 4]\n        ];\n        this.state = {\n            gameStatus: GAMESTATUS.INITIALISATION,\n            selectedOption: 1,\n            currentScreenCode: \"TITLE\",\n            map,\n            characters: [],\n            bonus: [],\n            bombs: [],\n            walls: [],\n            blasts: []\n        };\n    }\n\n    createStore() {\n        const that = this;\n        document.addEventListener('action', function (e) {\n            that.state = that.reducer(that.state, e.detail);\n            document.dispatchEvent(new CustomEvent('state', {detail: that.state}));\n        }, false);\n\n    }\n\n    reducer(state, action) {\n        if (!state) {\n            return this.initialState();\n        }\n\n        switch (action.type) {\n            case Action.UP:\n                Music.menuBeep().then(song => song.play());\n                return {\n                    ...state,\n                    selectedOption: state.selectedOption - 1\n                };\n            case Action.DOWN:\n                Music.menuBeep().then(song => song.play());\n                return {\n                    ...state,\n                    selectedOption: state.selectedOption + 1\n                };\n            case Action.LEFT: {\n                Music.menuBeep().then(song => song.play());\n                return state;\n            }\n            case Action.RIGHT: {\n                Music.menuBeep().then(song => song.play());\n                return state;\n            }\n            case Action.ENTER:\n                let newScreen = Menu.getNewScreen(state.selectedOption, state.currentScreenCode, state.gameStatus);\n                if (newScreen === \"TITLE\" && [GAMESTATUS.INITIALISATION, GAMESTATUS.READY].includes(state.gameStatus)) {\n                    Music.menuPrevious().then(song => song.play());\n                } else {\n                    Music.menuNext().then(song => song.play());\n                }\n\n                return {\n                    ...state,\n                    selectedOption: 1,\n                    currentScreenCode: newScreen\n                };\n\n            case Action.ADD_PLAYER:\n                const characters = state.characters;\n                let gameStatus = state.gameStatus;\n                if([GAMESTATUS.INITIALISATION, GAMESTATUS.READY].includes(gameStatus)) {\n                    if (!characters.find(character => character.color === action.payload.index)) {\n\n                        switch (action.payload.index) {\n                            case COLOR.WHITE:\n                                characters.push(new Character(COLOR.WHITE, 1, 1, DIRECTION.DOWN));\n                                break;\n                            case COLOR.BLACK: {\n                                characters.push(new Character(COLOR.BLACK, 1, 11, DIRECTION.DOWN));\n                                break;\n                            }\n                            case COLOR.BLUE: {\n                                characters.push(new Character(COLOR.BLUE, 13, 1, DIRECTION.DOWN));\n                                break;\n                            }\n                            case COLOR.RED:\n                                characters.push(new Character(COLOR.RED, 13, 11, DIRECTION.DOWN));\n                                break;\n                        }\n\n                    }\n\n                    if (characters.length >= 2) {\n                        gameStatus = GAMESTATUS.READY;\n                    }\n                }\n\n                return {\n                    ...state,\n                    characters,\n                    gameStatus\n                };\n            case Action.MENU_OVERFLOW: {\n                return {\n                    ...state,\n                    selectedOption: action.payload.selectedOption\n                }\n            }\n            case Action.RESET: {\n                setTimeout(function () {\n                    location.reload()\n                }, 100);\n                return this.state;\n            }\n            case Action.ADD_BLAST:\n                state.blasts.push(new Blast(action.payload.bomb, action.payload.character, state.map, state.walls, state.bombs, state.characters, state.bonus));\n                return {\n                    ...state,\n                };\n            case Action.BLAST_VANISHED:\n                state.blasts.splice(state.blasts.indexOf(action.payload.blast), 1);\n                return {\n                    ...state\n                };\n            case Action.DROP_BOMB:\n                if (state.gameStatus === GAMESTATUS.IN_PROGRESS) {\n                    const bombUsed = state.characters.find(character => character.color === action.payload.color).bombUsed;\n                    const bombMax = state.characters.find(character => character.color === action.payload.color).bombMax;\n\n                    if (bombUsed < bombMax) {\n                        state.characters.find(character => character.color === action.payload.color).bombUsed++;\n                        let bomb = new Bomb(state.characters.find(character => character.color === action.payload.color));\n                        state.bombs.push(bomb);\n                        Music.bombDrop().then(song => song.play());\n                    }\n\n                }\n                return {\n                    ...state,\n                };\n            case Action.BOMB_EXPLODED:\n                state.characters.find(character => character.color === action.payload.bomb.character.color).bombUsed--;\n                state.bombs.splice(state.bombs.indexOf(action.payload.bomb), 1);\n                Music.explosion().then(song => song.play());\n                return {\n                    ...state\n                };\n            case Action.DESTROY:\n                state.walls[action.payload.destroyedX][action.payload.destroyedY].destroyed = true;\n                return {\n                    ...state,\n                };\n            case Action.KILL:\n                state.characters.find(character => character.color === action.payload.character.color).status = CharacterStatus.DEAD;\n                Music.death().then(song => song.play());\n                return {\n                    ...state,\n                };\n            case Action.VICTORY:\n                const player = state.characters.find(character => character.color === action.payload.character.color);\n                player.status = CharacterStatus.VICTORIOUS;\n                Music.win().then(song => song.play());\n                return {\n                    ...state,\n                    gameStatus: GAMESTATUS.END\n                };\n            case Action.INIT_GAME:\n                return {\n                    ...state,\n                    gameStatus: GAMESTATUS.IN_PROGRESS,\n                    currentScreenCode: action.payload.currentScreenCode,\n                    walls: action.payload.walls,\n                    bonus: action.payload.bonus\n                };\n\n            case Action.GET_BONUS:\n                switch (action.payload.bonus.type) {\n                    case BONUSTYPE.POWER:\n                        state.characters.find(character => character.color === action.payload.playerColor).radius++;\n                        break;\n                    case BONUSTYPE.BOMB:\n                        state.characters.find(character => character.color === action.payload.playerColor).bombMax++;\n                        break;\n                    case BONUSTYPE.SPEED:\n                        const thePlayer = state.characters.find(character => character.color === action.payload.playerColor);\n                        if (state.characters.find(character => character.color === action.payload.playerColor) > 8) {\n                            state.characters.find(character => character.color === action.payload.playerColor).animationDuration = thePlayer.animationDuration - 1;\n                        }\n                        break;\n                }\n                const bonus = state.bonus.find(bonus => bonus.x === action.payload.bonus.x && bonus.y === action.payload.bonus.y);\n                state.bonus.splice(state.bonus.indexOf(bonus), 1);\n                Music.bonus().then(song => song.play());\n\n                return {\n                    ...state\n                };\n\n            case Action.MOVE: {\n                if (state.gameStatus === GAMESTATUS.IN_PROGRESS) {\n                    state.characters.find(character => character.color === action.payload.color).move(action.payload.direction, state);\n                }\n                return {\n                    ...state\n                };\n\n            }\n\n            case Action.BONUS_EXPLODED: {\n                const bonus = state.bonus.find(item => item.x === action.payload.item.x && item.y === action.payload.item.y);\n                state.bonus.splice(state.bonus.indexOf(bonus), 1);\n                return {\n                    ...state\n                }\n            }\n        }\n\n    }\n}","import {Action} from \"../state/actions\";\n\nexport class Keyboard {\n\n    constructor() {\n\n        this.keys = {\n            up: 38,\n            down: 40,\n            left: 37,\n            right: 39,\n            space: 32,\n            enter: 13,\n            escape: 27\n        };\n\n        this.handledKeys = [];\n        this.handledKeys[this.keys.up] = false;\n        this.handledKeys[this.keys.down] = false;\n        this.handledKeys[this.keys.left] = false;\n        this.handledKeys[this.keys.right] = false;\n        this.handledKeys[this.keys.space] = false;\n        this.handledKeys[this.keys.enter] = false;\n        this.handledKeys[this.keys.escape] = false;\n    }\n\n    bind() {\n        const that = this;\n        addEventListener(\"keyup\", function (e) {\n            delete that.handledKeys[e.keyCode];\n        }, false);\n\n        addEventListener(\"keydown\", function (e) {\n            if (that.handledKeys[e.keyCode]) {\n                that.handledKeys[e.keyCode] = true;\n            }\n\n            switch (e.keyCode) {\n\n                case that.keys.up:\n                    document.dispatchEvent(new CustomEvent('action', {\n                        detail: {\n                            type: Action.UP,\n                        },\n                    }));\n                    break;\n                case that.keys.down:\n                    document.dispatchEvent(new CustomEvent('action', {\n                        detail: {\n                            type: Action.DOWN,\n                        },\n                    }));\n                    break;\n                case that.keys.enter:\n                    document.dispatchEvent(new CustomEvent('action', {detail: {type: Action.ENTER}}));\n                    break;\n                case that.keys.escape:\n                    document.dispatchEvent(new CustomEvent('action', {detail: {type: Action.RESET}}));\n                    break;\n                case that.keys.left:\n                    document.dispatchEvent(new CustomEvent('action', {\n                        detail: {\n                            type: Action.LEFT,\n                        },\n                    }));\n                    break;\n                case that.keys.right:\n                    document.dispatchEvent(new CustomEvent('action', {\n                        detail: {\n                            type: Action.RIGHT,\n                        },\n                    }));\n                    break;\n            }\n\n        }, false);\n    }\n}","import {Action} from \"../state/actions\";\nimport {DIRECTION} from \"../game/direction\";\n\n/**\n * Game PAD management :\n * X : 0\n * LEFT : 14\n * DOWN :  13\n * RIGHT : 15\n * TOP:  12\n */\nexport class GamePad {\n\n    constructor() {\n\n        this.toucheds = [false, false, false, false];\n        window.addEventListener(\"gamepadconnected\", function (e) {\n            document.dispatchEvent(new CustomEvent('action', {\n                detail: {\n                    type: Action.ADD_PLAYER,\n                    payload: {\n                        index: e.gamepad.index\n                    }\n                }\n            }));\n        }, false);\n\n        window.addEventListener(\"gamepaddisconnected\", function (e) {\n        }, false);\n    }\n\n    listen() {\n\n        [navigator.getGamepads()[0],\n            navigator.getGamepads()[1],\n            navigator.getGamepads()[2],\n            navigator.getGamepads()[3]\n        ].filter(gamepad => !!gamepad)\n            .forEach((gamepad, index) => {\n\n                // X\n                if (gamepad.buttons[0].pressed && !this.toucheds[index]) {\n                    this.toucheds[index] = true;\n                    // if(this.tic === 4) {\n                        document.dispatchEvent(new CustomEvent('action', {\n                            detail: {\n                                type: Action.DROP_BOMB,\n                                payload: {\n                                    color: index\n                                }\n                            }\n                        }));\n                    // }\n                } else if(!gamepad.buttons[0].pressed && this.toucheds[index]) {\n                    this.toucheds[index] = false;\n                }\n\n                // LEFT\n                if (gamepad.buttons[14].pressed) {\n                    document.dispatchEvent(new CustomEvent('action', {\n                        detail: {\n                            type: Action.MOVE,\n                            payload: {\n                                color: index,\n                                direction: DIRECTION.LEFT\n                            }\n                        },\n                    }));\n                }\n\n                // DOWN\n                if (gamepad.buttons[13].pressed) {\n                    document.dispatchEvent(new CustomEvent('action', {\n                        detail: {\n                            type: Action.MOVE,\n                            payload: {\n                                color: index,\n                                direction: DIRECTION.DOWN\n                            }\n                        },\n                    }));\n                }\n\n                // RIGHT\n                if (gamepad.buttons[15].pressed) {\n                    document.dispatchEvent(new CustomEvent('action', {\n                        detail: {\n                            type: Action.MOVE,\n                            payload: {\n                                color: index,\n                                direction: DIRECTION.RIGHT\n                            }\n                        },\n                    }));\n                }\n\n                // UP\n                if (gamepad.buttons[12].pressed) {\n                    document.dispatchEvent(new CustomEvent('action', {\n                        detail: {\n                            type: Action.MOVE,\n                            payload: {\n                                color: index,\n                                direction: DIRECTION.TOP\n                            }\n                        },\n                    }));\n                }\n            });\n\n\n    }\n\n}"],"sourceRoot":""}